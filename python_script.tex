\documentclass[epsfig,a4paper,11pt,titlepage,twoside,openany]{book}
\usepackage[paperheight=29.7cm,paperwidth=21cm,outer=1.5cm,inner=2.5cm,top=2cm,bottom=2cm]{geometry}
\pagenumbering{gobble}
\usepackage{listings}
\usepackage[dvipsnames]{xcolor}

\lstset{frame=tb,
  language=Python,
  columns=flexible,
}

\definecolor{maroon}{cmyk}{0, 0.87, 0.68, 0.32}
\definecolor{halfgray}{gray}{0.55}
\definecolor{ipython_frame}{RGB}{207, 207, 207}
\definecolor{ipython_bg}{RGB}{247, 247, 247}
\definecolor{ipython_red}{RGB}{186, 33, 33}
\definecolor{ipython_green}{RGB}{0, 128, 0}
\definecolor{ipython_cyan}{RGB}{64, 128, 128}
\definecolor{ipython_purple}{RGB}{170, 34, 255}

\lstdefinelanguage{Python}{
    morekeywords=[1]{open, load, dump, dirname, abspath, \_\_file\_\_, import, array, cos, sin, dot, dict},
    sensitive=true,
    morekeywords=[2]{translation, rotation\_z, scale\_y, current\_folder, original\_name, dict\_name, original\_data, rot\_matrix, scale\_matrix, roto\_scaling, dict\_data, obj, k, v},
    morecomment=[l]\#,
    morestring=[b]",
    identifierstyle=\color{black},
    commentstyle=\color{ipython_cyan},
    stringstyle=\color{ipython_red},
    basicstyle=\scriptsize\ttfamily,
    % keepspaces=true,
    keywordstyle=[1]\color{ipython_green},
    keywordstyle=[2]\color{ipython_purple},
}

\begin{document}

\begin{minipage}[h]{0.47\linewidth}
    \begin{lstlisting}[
        language=Python
    ]
import json
import os
import numpy as np

translation = np.array([6.8210, 8.7180, 0])
rotation_z = 135 * np.pi / 180
scale_y = 1.0925

current_folder = os.path.dirname(
                os.path.abspath(__file__))
original_name = current_folder 
                + "/waypoints_original.json"
dict_name = current_folder + "/waypoints.json"

with open(original_name) as f:
    original_data = json.load(f)

rot_matrix = np.array(
    [[np.cos(rotation_z), -np.sin(rotation_z), 0],
    [np.sin(rotation_z), np.cos(rotation_z), 0],
    [0, 0, 1],
])
    \end{lstlisting}
\end{minipage}
\begin{minipage}[h]{0.47\linewidth}
    \begin{lstlisting}[
        language=Python
    ]
scale_matrix = np.array([[1, 0, 0], 
                         [0, scale_y, 0],
                         [0, 0, 1]])

roto_scaling = np.dot(rot_matrix, scale_matrix)

dict_data = dict()

for obj in original_data:
    dict_data[obj["label"]] = {
        k: 
            ((np.dot(
                    roto_scaling,
                    np.array(v) * np.array([-1, -1, 1])
                )) * np.array([-1, -1, 1]) 
                - translation
            )[0:2].tolist()
        for k, v in obj.items() if k != "label"
    }

with open(dict_name, "w") as f:
    json.dump(dict_data, f, indent=4)
    \end{lstlisting}
\end{minipage}

\end{document}